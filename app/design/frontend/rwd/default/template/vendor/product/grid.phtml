<?php echo $this->getMessagesBlock()->toHtml() ?>
<?php $products = $this->getProducts(); ?>
<?php //echo "<pre>"; print_r($products->getData()); die;
?>
<div class="page-title">
    <h1><?php echo $this->__('My Products') ?></h1>
</div>
<?php //echo $this->getPagerHtml(); 
?>
<a href="<?php echo $this->getAddUrl(); ?>" class="button"><?php echo $this->__('Add New Product') ?></a><br><br>
<h5>
    <p style="color: green"># Click On Product Row For Edit Or Delete</p>
</h5>
<h5>
    <p style="color: blue">* Pending Status Cannot Be Edit Or Delete Till <b>Approved Or Rejected</b></p>
</h5>
<?php if ($products->getData()) : ?>
    <table class="data-table" id="my-product-table">
        <thead>
            <tr>
                <th><?php echo $this->__('#') ?></th>
                <th><?php echo $this->__('Name') ?></th>
                <th><?php echo $this->__('Type') ?></th>
                <th><?php echo $this->__('SKU') ?></th>
                <th><?php echo $this->__('Price') ?></th>
                <th><?php echo $this->__('Last Performed State') ?></th>
                <th><?php echo $this->__('Status') ?></th>
            </tr>
        </thead>
        <tbody>
            <?php $_odd = ''; ?>
            <?php foreach ($products->getData() as $product) : ?>
                <?php if ($product['approved'] == '2') : ?>
                    <tr>
                    <?php else : ?>
                    <tr style="cursor: pointer;" onclick="redirectToEdit(this)" title="<?= $this->getEditUrl() . 'id' . '/' . $product['entity_id']; ?>">
                    <?php endif ?>
                    <td><?php echo $product['entity_id']; ?>&nbsp;</td>
                    <td><?php echo $product['custom_name']; ?>&nbsp;</td>
                    <!--<td class="a-center">{$page.product[io].customer}</td>-->
                    <td><?php echo $product['type_id']; ?>&nbsp;</td>
                    <td><?php echo $product['sku']; ?>&nbsp;</td>
                    <td><?php echo $product['price']; ?>&nbsp;</td>
                    <td><b><?php echo ucwords($product['request_type']); ?>&nbsp;</b></td>
                    <?php if ($product['approved'] == '2') : ?>
                        <td>
                            <p style="color: blue"><?php echo 'Pending' ?>&nbsp;</p>
                        </td>
                    <?php elseif ($product['approved'] == '1') : ?>
                        <td>
                            <p style="color: green"><?php echo 'Approved' ?>&nbsp;</p>
                        </td>
                    <?php elseif ($product['approved'] == '0') :  ?>
                        <td>
                            <p style="color: red"><?php echo 'Rejected' ?>&nbsp;</p>
                        </td>
                    <?php endif; ?>
                    </tr>
                <?php endforeach; ?>
        </tbody>
    </table>
    <script type="text/javascript">
        decorateTable('my-product-table');

        function redirectToEdit(row) {
            window.location = row.title;
        }
    </script>
    <?php echo $this->getPagerHtml(); ?>
<?php else : ?>
    <p><?php echo $this->__('You have Products yet.'); ?></p>
<?php endif ?>